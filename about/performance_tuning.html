<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><script>var loc = new String(window.location); if (loc.indexOf('facebook.github.io/buck') != -1) {window.location.replace(loc.replace('facebook.github.io/buck', 'buckbuild.com'));}</script><!-- Facebook Pixel Code --><script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','//connect.facebook.net/en_US/fbevents.js'); fbq('init', '1637165926500152'); fbq('track', 'PageView');</script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1637165926500152&ev=PageView&noscript=1" /></noscript><!-- End Facebook Pixel Code --><title>Buck: Performance Tuning</title><link type="image/png" rel="shortcut icon" href="/static/favicon.png" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/static/buck.css"><meta property="og:locale" content="en_US"><meta property="og:title" content="Performance Tuning"><meta property="og:site_name" content="Buck: a build tool"><meta property="og:image" content="http://buckbuild.com/static/og.png"><meta property="og:type" content="article"><meta property="og:description" content="Buck does a lot of work to make builds as fast as possible, and we also give developers tools to figure out where the time is being spent inside of their builds."><meta property="fb:admins" content="584556688222168"><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44373548-18', 'auto');
    ga('send', 'pageview');
  </script></head><body><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><header class='topbar'><nav class='width'><a href='http://buckbuild.com/'><h1>Buck</h1></a><ul class='menu'><li><a href='/setup/getting_started.html'>Getting Started</a><li><a href='https://groups.google.com/forum/#!forum/buck-build'>Group</a><li><a href='/javadoc/'>API</a><li><a href='https://github.com/facebook/buck'>GitHub</a></ul></nav></header><section class='content'><div class='width'><article><h1>Performance Tuning</h1><div class="overview"><h2>Performance Tuning Your Builds</h2>Buck <a href="/concept/what_makes_buck_so_fast.html">does a lot of work</a>  to make builds as fast as possible, and we also give developers tools to figure out where the time is being spent inside of their builds.<h2>Super Console</h2><img id="super_console_sample" src="/static/buck-build-15fps.gif" alt="Chrome Tracing Sample"><p>When running Buck in an <a href="http://en.wikipedia.org/wiki/ANSI_escape_code">Ansi</a> compliant terminal, Buck displays the break down of what each thread is doing, updated every 100ms, in what we affectionately call "SuperConsole."  While a build is running, this gives developers a good idea of what Buck is spending its time doing, and can often help people spot issues in their builds.  If you want to see what happened after the fact or to have a trace you can send around your team, use Chrome Tracing.<h2>Chrome Tracing</h2><img id="chrome_sample" src="/static/buck_chrome_sample.png" alt="Chrome Tracing Sample">The Chrome team has built an awesome framework for viewing performance traces right inside of <a href="http://www.chromium.org/developers/how-tos/trace-event-profiling-tool">Chrome</a>.  You can access this by going to <code>chrome://tracing</code> in your browser.  Consult the trace viewer's <a href="https://github.com/google/trace-viewer/">project page</a> for more information on the trace viewer and the file format.<p>After Buck is done with each build, it will produce a Chrome Trace file that can be loaded up in <code>chrome://tracing</code> in the directory <code>buck-out/log/traces/</code>.  Buck will save a file in the format <code>build.[timestamp].trace</code>, and then create a symlink from the most recent trace to <code>build.trace</code>.<p>To load up this trace, visit <code>chrome://tracing</code> inside of Chrome, and hit "Load".  Load the trace file of interest, and look around to see where time was spent.  Each row represents a different thread, and all of the steps taken for a given rule are logged underneath that rule.  Additionally, we log information about how the rule was built and and the rule key for each artifact fetch.  Press <em>?</em> to get the help menu for the Chrome Trace Viewer.</div></article><nav><h3>Getting Started</h3><ul><li><a href="/about/overview.html">Overview</a><li><a href="/setup/install.html">Downloading and Installing Buck</a><li><a href="/setup/intellij_plugin_install.html">Installing the IntelliJ Plugin</a><li><a href="/setup/getting_started.html">Getting Started</a><li><a href="/article/exopackage.html">Exopackage</a><li><a href="/article/query_cheat_sheet.html">Buck Query Cheat Sheet</a></ul><h3>About</h3><ul><li><a href="/concept/what_makes_buck_so_fast.html">What Makes Buck so Fast?</a><li><a href="/concept/troubleshooting.html">Troubleshooting</a><li><a href="/about/performance_tuning.html">Performance Tuning</a><li><a href="/concept/faq.html">FAQ</a><li><a href="/presentations/">Learn More (Buck Presentations)</a></ul><h3>Concepts</h3><ul><li><a href="/concept/build_rule.html">Build Rule</a><li><a href="/concept/build_target.html">Build Target</a><li><a href="/concept/build_file.html">Build File</a><li><a href="/concept/buckversion.html">.buckversion</a><li><a href="/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/concept/buckjavaargs.html">.buckjavaargs</a><li><a href="/concept/buckconfig.html">.buckconfig</a><li><a href="/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/concept/visibility.html">Visibility</a><li><a href="/concept/http_cache_api.html">HTTP Cache API</a></ul><h3>Build Rules</h3><ul><li><strong>Core</strong></li><li><a href="/rule/export_file.html">export_file()</a><li><a href="/rule/genrule.html">genrule()</a><li><a href="/rule/remote_file.html">remote_file()</a><li><a href="/rule/worker_tool.html">worker_tool()</a><li><a href="/rule/zip_file.html">zip_file()</a><li><strong>Android</strong></li><li><a href="/rule/android_aar.html">android_aar()</a><li><a href="/rule/android_binary.html">android_binary()</a><li><a href="/rule/android_build_config.html">android_build_config()</a><li><a href="/rule/android_instrumentation_apk.html">android_instrumentation_apk()</a><li><a href="/rule/android_instrumentation_test.html">android_instrumentation_test()</a><li><a href="/rule/android_library.html">android_library()</a><li><a href="/rule/android_manifest.html">android_manifest()</a><li><a href="/rule/android_prebuilt_aar.html">android_prebuilt_aar()</a><li><a href="/rule/android_resource.html">android_resource()</a><li><a href="/rule/apk_genrule.html">apk_genrule()</a><li><a href="/rule/gen_aidl.html">gen_aidl()</a><li><a href="/rule/keystore.html">keystore()</a><li><a href="/rule/ndk_library.html">ndk_library()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/rule/project_config.html">project_config()</a><li><strong>CXX</strong></li><li><a href="/rule/cxx_binary.html">cxx_binary()</a><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/cxx_test.html">cxx_test()</a><li><a href="/rule/prebuilt_cxx_library.html">prebuilt_cxx_library()</a><li><a href="/rule/prebuilt_cxx_library_group.html">prebuilt_cxx_library_group()</a><li><strong>D</strong></li><li><a href="/rule/d_binary.html">d_binary()</a><li><a href="/rule/d_library.html">d_library()</a><li><a href="/rule/d_test.html">d_test()</a><li><strong>Go</strong></li><li><a href="/rule/go_binary.html">go_binary()</a><li><a href="/rule/go_library.html">go_library()</a><li><a href="/rule/go_test.html">go_test()</a><li><strong>Groovy</strong></li><li><a href="/rule/groovy_library.html">groovy_library()</a><li><strong>Halide</strong></li><li><a href="/rule/halide_library.html">halide_library()</a><li><strong>Haskell</strong></li><li><a href="/rule/haskell_binary.html">haskell_binary()</a><li><a href="/rule/haskell_library.html">haskell_library()</a><li><a href="/rule/prebuilt_haskell_library.html">prebuilt_haskell_library()</a><li><strong>iOS</strong></li><li><a href="/rule/apple_asset_catalog.html">apple_asset_catalog()</a><li><a href="/rule/apple_binary.html">apple_binary()</a><li><a href="/rule/apple_bundle.html">apple_bundle()</a><li><a href="/rule/apple_library.html">apple_library()</a><li><a href="/rule/apple_package.html">apple_package()</a><li><a href="/rule/apple_resource.html">apple_resource()</a><li><a href="/rule/apple_test.html">apple_test()</a><li><strong>Java</strong></li><li><a href="/rule/java_binary.html">java_binary()</a><li><a href="/rule/java_library.html">java_library()</a><li><a href="/rule/java_test.html">java_test()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><strong>Lua</strong></li><li><a href="/rule/cxx_lua_extension.html">cxx_lua_extension()</a><li><a href="/rule/lua_binary.html">lua_binary()</a><li><a href="/rule/lua_library.html">lua_library()</a><li><strong>Python</strong></li><li><a href="/rule/prebuilt_python_library.html">prebuilt_python_library()</a><li><a href="/rule/python_binary.html">python_binary()</a><li><a href="/rule/python_library.html">python_library()</a><li><a href="/rule/python_test.html">python_test()</a><li><strong>Rust</strong></li><li><a href="/rule/rust_binary.html">rust_binary()</a><li><a href="/rule/rust_library.html">rust_library()</a><li><strong>.Net</strong></li><li><a href="/rule/csharp_library.html">csharp_library()</a><li><a href="/rule/prebuilt_dotnet_library.html">prebuilt_dotnet_library()</a></ul><h3>Functions</h3><ul><li><a href="/function/add_build_file_dep.html">add_build_file_dep()</a><li><a href="/function/allow_unsafe_import.html">allow_unsafe_import()</a><li><a href="/function/flatten_dicts.html">flatten_dicts()</a><li><a href="/function/glob.html">glob()</a><li><a href="/function/include_defs.html">include_defs()</a><li><a href="/function/read_config.html">read_config()</a><li><a href="/function/subdir_glob.html">subdir_glob()</a><li><a href="/function/string_parameter_macros.html">String Parameter Macros</a></ul><h3>Commands</h3><ul><li><a href="/command/common_parameters.html">Common Parameters</a><li><a href="/command/audit.html">buck audit</a><li><a href="/command/autodeps.html">buck autodeps</a><li><a href="/command/build.html">buck build</a><li><a href="/command/clean.html">buck clean</a><li><a href="/command/fetch.html">buck fetch</a><li><a href="/command/install.html">buck install</a><li><a href="/command/project.html">buck project</a><li><a href="/command/query.html">buck query</a><li><a href="/command/repl.html">buck repl</a><li><a href="/command/run.html">buck run</a><li><a href="/command/root.html">buck root</a><li><a href="/command/server.html">buck server</a><li><a href="/command/suggest.html">buck suggest</a><li><a href="/command/targets.html">buck targets</a><li><a href="/command/test.html">buck test</a><li><a href="/command/uninstall.html">buck uninstall</a><li><a href="/command/buckd.html">buckd</a></ul><h3>Extending Buck</h3><ul><li><a href="/extending/macros.html">Custom Macros</a><li><a href="/extending/rules.html">Custom Rules</a></ul><h3>Contributing to Buck</h3><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="http://stackoverflow.com/questions/ask?tags=buck">Get Support</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/contributing/tour.html">Tour of the Codebase</a><li><a href="/contributing/development.html">Development Workflow</a><li><a href="/contributing/codestyle.html">Code Style</a><li><a href="/contributing/logging.html">Logging</a><li><a href="/contributing/immutables.html">Immutable Value Types</a><li><a href="/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></nav></div></section><footer><div class='width'>&copy; Copyright Facebook, 2013 -</div></footer></body></html>